!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("create-react-context")):"function"==typeof define&&define.amd?define(["exports","react","create-react-context"],t):t(e.ReachRouter={},e.React,e.createContext)}(this,function(e,t,n){"use strict";var r="default"in t?t.default:t;function o(e,t){return e(t={exports:{}},t.exports),t.exports}n=n&&n.hasOwnProperty("default")?n.default:n;var i="function"==typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,c=i?Symbol.for("react.portal"):60106,u=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,p=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.async_mode"):60111,m=i?Symbol.for("react.concurrent_mode"):60111,d=i?Symbol.for("react.forward_ref"):60112,v=i?Symbol.for("react.suspense"):60113,y=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,b=i?Symbol.for("react.lazy"):60116,w=i?Symbol.for("react.block"):60121,P=i?Symbol.for("react.fundamental"):60117,S=i?Symbol.for("react.responder"):60118,C=i?Symbol.for("react.scope"):60119;function E(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case h:case m:case u:case p:case s:case v:return e;default:switch(e=e&&e.$$typeof){case f:case d:case b:case g:case l:return e;default:return t}}case c:return t}}}function x(e){return E(e)===m}var O={AsyncMode:h,ConcurrentMode:m,ContextConsumer:f,ContextProvider:l,Element:a,ForwardRef:d,Fragment:u,Lazy:b,Memo:g,Portal:c,Profiler:p,StrictMode:s,Suspense:v,isAsyncMode:function(e){return x(e)||E(e)===h},isConcurrentMode:x,isContextConsumer:function(e){return E(e)===f},isContextProvider:function(e){return E(e)===l},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},isForwardRef:function(e){return E(e)===d},isFragment:function(e){return E(e)===u},isLazy:function(e){return E(e)===b},isMemo:function(e){return E(e)===g},isPortal:function(e){return E(e)===c},isProfiler:function(e){return E(e)===p},isStrictMode:function(e){return E(e)===s},isSuspense:function(e){return E(e)===v},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===u||e===m||e===p||e===s||e===v||e===y||"object"==typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===g||e.$$typeof===l||e.$$typeof===f||e.$$typeof===d||e.$$typeof===P||e.$$typeof===S||e.$$typeof===C||e.$$typeof===w)},typeOf:E},_=o(function(e,t){}),j=(_.AsyncMode,_.ConcurrentMode,_.ContextConsumer,_.ContextProvider,_.Element,_.ForwardRef,_.Fragment,_.Lazy,_.Memo,_.Portal,_.Profiler,_.StrictMode,_.Suspense,_.isAsyncMode,_.isConcurrentMode,_.isContextConsumer,_.isContextProvider,_.isElement,_.isForwardRef,_.isFragment,_.isLazy,_.isMemo,_.isPortal,_.isProfiler,_.isStrictMode,_.isSuspense,_.isValidElementType,_.typeOf,o(function(e){e.exports=O}),Object.getOwnPropertySymbols),F=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign;var R="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Function.call.bind(Object.prototype.hasOwnProperty);function U(){}function k(){}k.resetWarningCache=U;o(function(e){e.exports=function(){function e(e,t,n,r,o,i){if(i!==R){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:k,resetWarningCache:U};return n.PropTypes=n,n}()});var $=function(e,t,n,r,o,i,a,c){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,o,i,a,c],p=0;(u=new Error(t.replace(/%s/g,function(){return s[p++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}};function D(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function T(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function L(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}D.__suppressDeprecationWarning=!0,T.__suppressDeprecationWarning=!0,L.__suppressDeprecationWarning=!0;var W=function(e,t){return e.substr(0,t.length)===t},A=function(e,t){for(var n=void 0,r=void 0,o=t.split("?")[0],i=Y(o),a=""===i[0],c=V(e),u=0,s=c.length;u<s;u++){var p=!1,l=c[u].route;if(l.default)r={route:l,params:{},uri:t};else{for(var f=Y(l.path),h={},m=Math.max(i.length,f.length),d=0;d<m;d++){var v=f[d],y=i[d];if(H(v)){h[v.slice(1)||"*"]=i.slice(d).map(decodeURIComponent).join("/");break}if(void 0===y){p=!0;break}var g=B.exec(v);if(g&&!a){-1===J.indexOf(g[1])||$(!1);var b=decodeURIComponent(y);h[g[1]]=b}else if(v!==y){p=!0;break}}if(!p){n={route:l,params:h,uri:"/"+i.slice(0,d).join("/")};break}}}return n||r||null},I=function(e,t){return A([{path:e}],t)},N=function(e,t){if(W(e,"/"))return e;var n=e.split("?"),r=n[0],o=n[1],i=t.split("?")[0],a=Y(r),c=Y(i);if(""===a[0])return G(i,o);if(!W(a[0],".")){var u=c.concat(a).join("/");return G(("/"===i?"":"/")+u,o)}for(var s=c.concat(a),p=[],l=0,f=s.length;l<f;l++){var h=s[l];".."===h?p.pop():"."!==h&&p.push(h)}return G("/"+p.join("/"),o)},q=function(e,t){var n=e.split("?"),r=n[0],o=n[1],i=void 0===o?"":o,a="/"+Y(r).map(function(e){var n=B.exec(e);return n?t[n[1]]:e}).join("/"),c=t.location,u=(c=void 0===c?{}:c).search,s=(void 0===u?"":u).split("?")[1]||"";return a=G(a,i,s)},B=/^:(.+)/,z=function(e){return B.test(e)},H=function(e){return e&&"*"===e[0]},K=function(e,t){return{route:e,score:e.default?0:Y(e.path).reduce(function(e,t){return e+=4,!function(e){return""===e}(t)?z(t)?e+=2:H(t)?e-=5:e+=3:e+=1,e},0),index:t}},V=function(e){return e.map(K).sort(function(e,t){return e.score<t.score?1:e.score>t.score?-1:e.index-t.index})},Y=function(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")},G=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e+((n=n.filter(function(e){return e&&e.length>0}))&&n.length>0?"?"+n.join("&"):"")},J=["uri","path"],Q=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ee=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},te=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},ne=function(e){var t=e.location,n=t.search,r=t.hash,o=t.href,i=t.origin,a=t.protocol,c=t.host,u=t.hostname,s=t.port,p=e.location.pathname;!p&&o&&ie&&(p=new URL(o).pathname);return{pathname:p.split("/").map(function(e){return encodeURIComponent(decodeURIComponent(e))}).join("/"),search:n,hash:r,href:o,origin:i,protocol:a,host:c,hostname:u,port:s,state:e.history.state,key:e.history.state&&e.history.state.key||"initial"}},re=function(e,t){var n=[],r=ne(e),o=!1,i=function(){};return{get location(){return r},get transitioning(){return o},_onTransitionComplete:function(){o=!1,i()},listen:function(t){n.push(t);var o=function(){r=ne(e),t({location:r,action:"POP"})};return e.addEventListener("popstate",o),function(){e.removeEventListener("popstate",o),n=n.filter(function(e){return e!==t})}},navigate:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=a.state,u=a.replace,s=void 0!==u&&u;if("number"==typeof t)e.history.go(t);else{c=X({},c,{key:Date.now()+""});try{o||s?e.history.replaceState(c,null,t):e.history.pushState(c,null,t)}catch(n){e.location[s?"replace":"assign"](t)}}r=ne(e),o=!0;var p=new Promise(function(e){return i=e});return n.forEach(function(e){return e({location:r,action:"PUSH"})}),p}}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=e.indexOf("?"),n={pathname:t>-1?e.substr(0,t):e,search:t>-1?e.substr(t):""},r=0,o=[n],i=[null];return{get location(){return o[r]},addEventListener:function(e,t){},removeEventListener:function(e,t){},history:{get entries(){return o},get index(){return r},get state(){return i[r]},pushState:function(e,t,n){var a=n.split("?"),c=a[0],u=a[1],s=void 0===u?"":u;r++,o.push({pathname:c,search:s.length?"?"+s:s}),i.push(e)},replaceState:function(e,t,n){var a=n.split("?"),c=a[0],u=a[1],s=void 0===u?"":u;o[r]={pathname:c,search:s},i[r]=e},go:function(e){var t=r+e;t<0||t>i.length-1||(r=t)}}}},ie=!("undefined"==typeof window||!window.document||!window.document.createElement),ae=re(ie?window:oe()),ce=ae.navigate,ue=function(e,t){var r=n(t);return r.displayName=e,r},se=ue("Location"),pe=function(e){var t=e.children;return r.createElement(se.Consumer,null,function(e){return e?t(e):r.createElement(le,null,t)})},le=function(e){function t(){var n,r;Q(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=te(this,e.call.apply(e,[this].concat(i))),r.state={context:r.getContext(),refs:{unlisten:null}},te(r,n)}return Z(t,e),t.prototype.getContext=function(){var e=this.props.history;return{navigate:e.navigate,location:e.location}},t.prototype.componentDidCatch=function(e,t){if(!Ee(e))throw e;(0,this.props.history.navigate)(e.uri,{replace:!0})},t.prototype.componentDidUpdate=function(e,t){t.context.location!==this.state.context.location&&this.props.history._onTransitionComplete()},t.prototype.componentDidMount=function(){var e=this,t=this.state.refs,n=this.props.history;n._onTransitionComplete(),t.unlisten=n.listen(function(){Promise.resolve().then(function(){requestAnimationFrame(function(){e.unmounted||e.setState(function(){return{context:e.getContext()}})})})})},t.prototype.componentWillUnmount=function(){var e=this.state.refs;this.unmounted=!0,e.unlisten()},t.prototype.render=function(){var e=this.state.context,t=this.props.children;return r.createElement(se.Provider,{value:e},"function"==typeof t?t(e):t||null)},t}(r.Component);le.defaultProps={history:ae};var fe=ue("Base",{baseuri:"/",basepath:"/",navigate:ae.navigate}),he=function(e){return r.createElement(fe.Consumer,null,function(t){return r.createElement(pe,null,function(n){return r.createElement(me,X({},t,n,e))})})},me=function(e){function t(){return Q(this,t),te(this,e.apply(this,arguments))}return Z(t,e),t.prototype.render=function(){var e=this.props,t=e.location,n=e.navigate,o=e.basepath,i=e.primary,a=e.children,c=(e.baseuri,e.component),u=void 0===c?"div":c,s=ee(e,["location","navigate","basepath","primary","children","baseuri","component"]),p=r.Children.toArray(a).reduce(function(e,t){var n=Me(o)(t);return e.concat(n)},[]),l=t.pathname,f=A(p,l);if(f){var h=f.params,m=f.uri,d=f.route,v=f.route.value;o=d.default?o:d.path.replace(/\*$/,"");var y=X({},h,{uri:m,location:t,navigate:function(e,t){return n(N(e,m),t)}}),g=r.cloneElement(v,y,v.props.children?r.createElement(he,{location:t,primary:i},v.props.children):void 0),b=i?ve:u,w=i?X({uri:m,location:t,component:u},s):s;return r.createElement(fe.Provider,{value:{baseuri:m,basepath:o,navigate:y.navigate}},r.createElement(b,w,g))}return null},t}(r.PureComponent);me.defaultProps={primary:!0};var de=ue("Focus"),ve=function(e){var t=e.uri,n=e.location,o=e.component,i=ee(e,["uri","location","component"]);return r.createElement(de.Consumer,null,function(e){return r.createElement(be,X({},i,{component:o,requestFocus:e,uri:t,location:n}))})},ye=!0,ge=0,be=function(e){function t(){var n,r;Q(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=te(this,e.call.apply(e,[this].concat(i))),r.state={},r.requestFocus=function(e){!r.state.shouldFocus&&e&&e.focus()},te(r,n)}return Z(t,e),t.getDerivedStateFromProps=function(e,t){if(null==t.uri)return X({shouldFocus:!0},e);var n=e.uri!==t.uri,r=t.location.pathname!==e.location.pathname&&e.location.pathname===e.uri;return X({shouldFocus:n||r},e)},t.prototype.componentDidMount=function(){ge++,this.focus()},t.prototype.componentWillUnmount=function(){0===--ge&&(ye=!0)},t.prototype.componentDidUpdate=function(e,t){e.location!==this.props.location&&this.state.shouldFocus&&this.focus()},t.prototype.focus=function(){var e=this.props.requestFocus;e?e(this.node):ye?ye=!1:this.node&&(this.node.contains(document.activeElement)||this.node.focus())},t.prototype.render=function(){var e=this,t=this.props,n=(t.children,t.style),o=(t.requestFocus,t.component),i=void 0===o?"div":o,a=(t.uri,t.location,ee(t,["children","style","requestFocus","component","uri","location"]));return r.createElement(i,X({style:X({outline:"none"},n),tabIndex:"-1",ref:function(t){return e.node=t}},a),r.createElement(de.Provider,{value:this.requestFocus},this.props.children))},t}(r.Component);!function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,o=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?o="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(o="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==o){var i=e.displayName||e.name,a="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+i+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==o?"\n  "+o:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=D,t.componentWillReceiveProps=T),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=L;var c=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;c.call(this,e,t,r)}}}(be);var we=function(){},Pe=r.forwardRef;void 0===Pe&&(Pe=function(e){return e});var Se=Pe(function(e,t){var n=e.innerRef,o=ee(e,["innerRef"]);return r.createElement(fe.Consumer,null,function(e){e.basepath;var i=e.baseuri;return r.createElement(pe,null,function(e){var a=e.location,c=e.navigate,u=o.to,s=o.state,p=o.replace,l=o.getProps,f=void 0===l?we:l,h=ee(o,["to","state","replace","getProps"]),m=N(u,i),d=encodeURI(m),v=a.pathname===d,y=W(a.pathname,d);return r.createElement("a",X({ref:t||n,"aria-current":v?"page":void 0},h,f({isCurrent:v,isPartiallyCurrent:y,href:m,location:a}),{href:m,onClick:function(e){if(h.onClick&&h.onClick(e),Re(e)){e.preventDefault();var t=p;if("boolean"!=typeof p&&v){var n=X({},a.state),r=(n.key,ee(n,["key"]));o=X({},s),i=r,t=(u=Object.keys(o)).length===Object.keys(i).length&&u.every(function(e){return i.hasOwnProperty(e)&&o[e]===i[e]})}c(m,{state:s,replace:t})}var o,i,u}}))})})});function Ce(e){this.uri=e}Se.displayName="Link";var Ee=function(e){return e instanceof Ce},xe=function(e){throw new Ce(e)},Oe=function(e){function t(){return Q(this,t),te(this,e.apply(this,arguments))}return Z(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.navigate,n=e.to,r=(e.from,e.replace),o=void 0===r||r,i=e.state,a=(e.noThrow,e.baseuri),c=ee(e,["navigate","to","from","replace","state","noThrow","baseuri"]);Promise.resolve().then(function(){var e=N(n,a);t(q(e,c),{replace:o,state:i})})},t.prototype.render=function(){var e=this.props,t=(e.navigate,e.to),n=(e.from,e.replace,e.state,e.noThrow),r=e.baseuri,o=ee(e,["navigate","to","from","replace","state","noThrow","baseuri"]),i=N(t,r);return n||xe(q(i,o)),null},t}(r.Component),_e=function(e){return r.createElement(fe.Consumer,null,function(t){var n=t.baseuri;return r.createElement(pe,null,function(t){return r.createElement(Oe,X({},t,{baseuri:n},e))})})},je=function(){var e=t.useContext(se);if(!e)throw new Error("useLocation hook was used but a LocationContext.Provider was not found in the parent tree. Make sure this is used in a component that is a child of Router");return e.location},Fe=function(e){return e.replace(/(^\/+|\/+$)/g,"")},Me=function e(t){return function(n){if(!n)return null;if(n.type===r.Fragment&&n.props.children)return r.Children.map(n.props.children,e(t));var o,i,a;if(n.props.path||n.props.default||n.type===_e||$(!1),n.type!==_e||n.props.from&&n.props.to||$(!1),n.type===_e&&(o=n.props.from,i=n.props.to,a=function(e){return z(e)},Y(o).filter(a).sort().join("/")!==Y(i).filter(a).sort().join("/"))&&$(!1),n.props.default)return{value:n,default:!0};var c=n.type===_e?n.props.from:n.props.path,u="/"===c?t:Fe(t)+"/"+Fe(c);return{value:n,default:n.props.default,path:n.props.children?Fe(u)+"/*":u}}},Re=function(e){return!e.defaultPrevented&&0===e.button&&!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)};e.Link=Se,e.Location=pe,e.LocationProvider=le,e.Match=function(e){var t=e.path,n=e.children;return r.createElement(fe.Consumer,null,function(e){var o=e.baseuri;return r.createElement(pe,null,function(e){var r=e.navigate,i=e.location,a=N(t,o),c=I(a,i.pathname);return n({navigate:r,location:i,match:c?X({},c.params,{uri:c.uri,path:t}):null})})})},e.Redirect=_e,e.Router=he,e.ServerLocation=function(e){var t=e.url,n=e.children,o=t.indexOf("?"),i=void 0,a="";return o>-1?(i=t.substring(0,o),a=t.substring(o)):i=t,r.createElement(se.Provider,{value:{location:{pathname:i,search:a,hash:""},navigate:function(){throw new Error("You can't call navigate on the server.")}}},n)},e.createHistory=re,e.createMemorySource=oe,e.isRedirect=Ee,e.navigate=ce,e.redirectTo=xe,e.globalHistory=ae,e.matchPath=I,e.useLocation=je,e.useNavigate=function(){var e=t.useContext(fe);if(!e)throw new Error("useNavigate hook was used but a BaseContext.Provider was not found in the parent tree. Make sure this is used in a component that is a child of Router");return e.navigate},e.useParams=function(){var e=t.useContext(fe);if(!e)throw new Error("useParams hook was used but a LocationContext.Provider was not found in the parent tree. Make sure this is used in a component that is a child of Router");var n=je(),r=I(e.basepath,n.pathname);return r?r.params:null},e.useMatch=function(e){if(!e)throw new Error("useMatch(path: string) requires an argument of a string to match against");var n=t.useContext(fe);if(!n)throw new Error("useMatch hook was used but a LocationContext.Provider was not found in the parent tree. Make sure this is used in a component that is a child of Router");var r=je(),o=N(e,n.baseuri),i=I(o,r.pathname);return i?X({},i.params,{uri:i.uri,path:e}):null},Object.defineProperty(e,"__esModule",{value:!0})});
